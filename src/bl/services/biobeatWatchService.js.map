{"version":3,"file":"biobeatWatchService.js","sourceRoot":"","sources":["biobeatWatchService.ts"],"names":[],"mappings":";;;;;AAAA,gDAA0C;AA6B1C;IAKI;QAHQ,gBAAW,GAAG,wHAAwH,CAAC;QACvI,cAAS,GAAG,gHAAgH,CAAC;IAEtH,CAAC;IAEhB,4CAAc,GAAd,UAAe,QAAgB,EAAE,cAAqB,EAAE,YAAmB;QACvE,IAAI,kBAAkB,GAAG,iGAA+F,QAAQ,wBAAmB,cAAc,sBAAiB,YAAc,CAAC;QACjM,IAAI,YAAiC,CAAC;QAEtC,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAA,GAAG;YAC3B,YAAY,GAAG,GAAG,CAAC,IAAI,CAAA;YACvB,OAAO,eAAK,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE;oBAC7C,WAAW,EAAE,YAAY,CAAC,YAAY;iBACzC,EAAC,CAAC,CAAC;QACR,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,sCAAQ,GAAhB;QACI,OAAO,eAAK,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,OAAO,EAAE;gBAC3C,cAAc,EAAE,mCAAmC;gBACnD,eAAe,EAAE,IAAI,CAAC,SAAS;aAClC,EAAC,CAAC,CAAC;IACR,CAAC;IACL,0BAAC;AAAD,CAAC,AAzBD,IAyBC;AAzBY,kDAAmB","sourcesContent":["import axios, {AxiosPromise} from \"axios\";\r\n\r\nexport interface BiobeatTokenReponse {\r\n    access_token: string;\r\n    expires_in: number;\r\n    token_type: string;\r\n}\r\n\r\nexport interface BiobeatMeasurmentsResponse {\r\n    rr: number;\r\n    pp: number;\r\n    protocol_num: number;\r\n    sbp: number;\r\n    sv: number;\r\n    spo2: number;\r\n    movement: number;\r\n    ci: number;\r\n    timestamp: number;\r\n    patch_id: string;\r\n    hrv: number;\r\n    hr: number;\r\n    svr: number;\r\n    co: number;\r\n    dbp: number;\r\n    temp: number;\r\n    sweat: number;\r\n    calories: number\r\n}\r\n\r\nexport class BiobeatWatchService {\r\n\r\n    private getTokenUrl = `https://biobeatlogin.auth.eu-west-1.amazoncognito.com/oauth2/token?grant_type=client_credentials&scope=com.heroes/post`;\r\n    private tokenAuth = \"Basic N2xpM2tvOGhqYXV2MWk1bTByMjBnMGVhMDM6Y3EycHNmbGJlY3Y4ZXI4ajdsNG9yNGVucGJlNmxiNWRtYTkwZWhyOGdkaTJpcjIyMnNm\";\r\n    \r\n    constructor() {}\r\n\r\n    getMeasurement(patch_id: string, timeStampStart:string, timeStampEnd:string): AxiosPromise<BiobeatMeasurmentsResponse[]> {\r\n        let getMeasurementsUrl = `https://nkxjoc59ab.execute-api.eu-west-1.amazonaws.com/test/heroes-get-measurement?patch_id=${patch_id}&timestampstart=${timeStampStart}&timestampend=${timeStampEnd}`;\r\n        let biobeatToken: BiobeatTokenReponse;\r\n\r\n        return this.getToken().then(res => {\r\n            biobeatToken = res.data\r\n            return axios.post(getMeasurementsUrl, { headers: {\r\n                'bb_heroes': biobeatToken.access_token\r\n            }});\r\n        });\r\n    }\r\n\r\n    private getToken(): AxiosPromise<BiobeatTokenReponse> {\r\n        return axios.post(this.getTokenUrl, { headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'Authorization': this.tokenAuth\r\n        }});\r\n    }\r\n}"]}